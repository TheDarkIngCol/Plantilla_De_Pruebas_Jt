name: Taller Edad

on:
  workflow_dispatch:
    inputs:
      dia:
        description: "Día de nacimiento"
        required: true
        type: string
      mes:
        description: "Mes de nacimiento"
        required: true
        type: string
      year:
        description: "Año de nacimiento"
        required: true
        type: string

env:
  LIM_NINEZ: ${{ vars.LIM_NINEZ }}
  LIM_ADOLESCENCIA: ${{ vars.LIM_ADOLESCENCIA }}
  LIM_ADULTO_JOVEN: ${{ vars.LIM_ADULTO_JOVEN }}
  LIM_ADULTO: ${{ vars.LIM_ADULTO }}

jobs:
  calcular_edad:
    name: Calcular edad
    runs-on: ubuntu-latest
    outputs:
      edad: ${{ steps.edad.outputs.resultado }}
    steps:
      - name: Obtener edad
        id: edad
        run: |
          year="${{ inputs.year }}"
          current_year=$(date +%Y)
          edad=$((current_year - year))
          echo "La edad es: $edad"
          echo "resultado=$edad" >> $GITHUB_OUTPUT

  clasificar_edad:
    name: Clasificar etapa
    runs-on: ubuntu-latest
    needs: calcular_edad
    steps:
      - name: Mostrar etapa de vida
        run: |
          edad=${{ needs.calcular_edad.outputs.edad }}
          echo "La edad es: $edad años"
          if [ "$edad" -lt "$LIM_NINEZ" ]; then
            echo "La etapa es: Niñez"
          elif [ "$edad" -le "$LIM_ADOLESCENCIA" ]; then
            echo "La etapa es: Adolescencia"
          elif [ "$edad" -le "$LIM_ADULTO_JOVEN" ]; then
            echo "La etapa es: Adulto Joven"
          elif [ "$edad" -le "$LIM_ADULTO" ]; then
            echo "La etapa es: Adulto"
          else
            echo "La etapa es: Adulto Mayor"
          fi
